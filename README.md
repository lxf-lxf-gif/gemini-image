# 图片批处理大师 - 使用手册

<div align="center">

![Version](https://img.shields.io/badge/version-1.0.0-blue.svg)
![Platform](https://img.shields.io/badge/platform-Windows%20%7C%20macOS%20%7C%20Linux-lightgrey.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)

一款专业的图片批量处理工具,支持尺寸调整、水印添加、格式转换等50+功能

[功能清单](FEATURES.md) · [错误报告](ERRORS.md) · [问题反馈](#常见问题)

</div>

---

## 📑 目录

- [快速开始](#快速开始)
- [安装说明](#安装说明)
- [启动命令](#启动命令)
- [使用指南](#使用指南)
- [功能介绍](#功能介绍)
- [快捷键](#快捷键)
- [常见问题](#常见问题)
- [技术栈](#技术栈)

---

## 🚀 快速开始

### 前置要求
- **Node.js**: v18.0.0 或更高版本
- **npm**: v8.0.0 或更高版本
- **操作系统**: Windows 10+, macOS 10.15+, 或 Linux

### 三步启动

```bash
# 1. 安装依赖
npm install

# 2. 启动开发模式
npm run dev

# 3. 构建应用(可选)
npm run build
```

---

## 📦 安装说明

### 方法一: 克隆项目(开发者)

```bash
# 克隆仓库
git clone <repository-url>
cd "Image Marketing"

# 安装所有依赖
npm install

# 等待安装完成...
```

### 方法二: 使用发布版(普通用户)

1. 下载最新版本的安装包
2. 运行安装程序
3. 启动应用

---

## ⚡ 启动命令

### 开发模式

```bash
# 启动Vite开发服务器 + Electron
npm run dev
```

**特点**:
- ✅ 热重载(Hot Reload)
- ✅ 开发者工具自动打开
- ✅ 实时代码更新
- 🌐 前端地址: `http://localhost:5173`

---

### 预览模式

```bash
# 构建后预览
npm run preview
```

---

### 生产构建

```bash
# 构建桌面应用
npm run build
```

**输出**:
- 📁 `dist/` - 前端构建产物
- 📁 `dist/win-unpacked/` - Windows应用(未打包)
- 📦 安装程序 - 可分发的安装包

---

## 📖 使用指南

### 第一步: 导入图片

#### 方式1: 点击导入
1. 点击左侧面板的**"导入图片"**按钮
2. 在文件浏览器中选择图片(支持多选)
3. 点击"打开"

#### 方式2: 拖拽导入
1. 直接拖拽图片文件到画板区域
2. 图片自动添加到列表

#### 方式3: 快捷键导入
- 按 `Ctrl+O` (Windows/Linux)
- 按 `Cmd+O` (macOS)

**支持格式**: JPG, JPEG, PNG, WebP, GIF, BMP, TIFF

---

### 第二步: 设置参数

#### 基础设置

##### 1. 调整尺寸
- **预设尺寸**: 
  - 博客模式: 800×600, 1200×800等
  - 社交媒体: Instagram, Facebook, 微信
- **自定义尺寸**: 手动输入宽度和高度
- **保持原始**: 留空宽高字段

##### 2. 裁剪比例
- 启用裁剪开关
- 选择比例: 1:1, 16:9, 4:3, 自定义

##### 3. 输出格式
- JPEG (体积小,适合网络)
- PNG (支持透明,适合logo)
- WebP (现代格式,高压缩率)
- AVIF, TIFF, GIF

##### 4. 质量控制
- 拖动滑块: 10% - 100%
- 推荐值: 80-90 (平衡质量和体积)

---

#### 高级设置

##### 5. 图片调整
- **旋转**: 左转/右转 90°
- **翻转**: 水平/垂直
- **亮度**: 0.5 - 2.0 (1.0为原始)
- **对比度**: 0.5 - 2.0 (1.0为原始)
- **饱和度**: 0 - 2.0 (1.0为原始)

##### 6. 水印设置

**图片水印**:
1. 点击"选择"按钮
2. 选择水印图片(建议PNG透明背景)
3. 选择放置位置: 居中/右下/平铺

**文字水印**:
1. 输入水印文字(例如: @我的品牌)
2. 选择放置位置
3. 自动倾斜45°,半透明显示

##### 7. 边框与圆角
- **圆角**: 0-50px
- **边框宽度**: 0-20px
- **边框颜色**: 点击色块选择颜色

---

### 第三步: 设置输出

#### 输出目录
- **点击文件夹图标** 选择输出位置
- **默认**: 原图片所在目录的 `processed` 子文件夹
- **验证**: 自动检查目录是否有写权限

#### 文件命名
- **前缀**: 自定义文件名前缀(可选)
- **时间戳**: 自动添加精确到毫秒的时间戳
- **示例**: `product_20260108082443123_a3f2.jpg`

---

### 第四步: 批量处理

#### 开始处理
1. 点击底部的**"开始导出"**按钮
2. 或按 `Ctrl+Enter` 快捷键

#### 处理过程
- 📊 **进度显示**: 实时显示处理进度 (5/10)
- 📄 **当前文件**: 底部显示正在处理的文件名
- 🎨 **状态指示**: 
  - 🔵 Processing (蓝色loading)
  - ✅ Success (绿色勾)
  - ❌ Error (红色错误提示)

#### 取消处理
- 点击底部状态栏的**"取消"**按钮
- 确认后停止处理,显示已完成统计

#### 处理完成
- 弹出结果统计
- 成功/失败数量
- 失败文件的详细错误信息
- 输出目录位置

---

### 第五步: 使用预设(可选)

#### 保存预设
1. 设置好所有参数
2. 点击**"+ 保存当前"**
3. 输入预设名称(例如: "电商主图")
4. 确认保存

#### 应用预设
1. 点击已保存的预设名称
2. 所有参数自动恢复
3. 可以继续微调

#### 删除预设
- 鼠标悬停在预设上
- 点击**"删除"**按钮

---

## 🎨 功能介绍

### 核心功能

| 功能 | 说明 | 位置 |
|------|------|------|
| **批量导入** | 支持拖拽、选择、快捷键 | 左侧面板 |
| **尺寸调整** | 预设模板+自定义 | 右侧控制台 |
| **格式转换** | 6种格式支持 | 右侧控制台 |
| **水印添加** | 图片+文字水印 | 左侧品牌设置 |
| **批量处理** | 一键处理多张图片 | 底部按钮 |
| **预设管理** | 保存常用配置 | 右侧底部 |

### 进阶功能

- ✂️ **智能裁剪**: 多种比例,自动居中
- 🎨 **色彩调整**: 亮度/对比度/饱和度
- 🔄 **旋转翻转**: 90°旋转,水平/垂直翻转
- 🖼️ **圆角边框**: 自定义圆角和边框
- 🔍 **实时预览**: 点击图片查看大图
- ⚡ **取消功能**: 随时中断批量处理

详细功能清单请查看 [FEATURES.md](FEATURES.md)

---

## ⌨️ 快捷键

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Ctrl+O` / `Cmd+O` | 打开文件 | 弹出文件选择对话框 |
| `Ctrl+Enter` / `Cmd+Enter` | 开始处理 | 快速开始批量处理 |
| `Escape` | 关闭预览 | 关闭大图预览窗口 |

**提示**: 快捷键在任何时候都有效,提升操作效率!

---

## ❓ 常见问题

### Q1: 启动失败怎么办?

**A**: 检查以下几点:
1. Node.js版本是否 >= v18
2. 是否正确安装了依赖 (`npm install`)
3. 端口5173是否被占用
4. 查看终端错误日志

```bash
# 重新安装依赖
rm -rf node_modules
npm install
```

---

### Q2: 图片处理失败?

**A**: 可能原因:
1. ❌ **文件格式不支持** → 确认是jpg/png等图片
2. ❌ **水印路径无效** → 重新选择水印图片
3. ❌ **输出目录无权限** → 选择有写权限的目录
4. ❌ **图片文件损坏** → 尝试用其他工具打开确认

查看详细错误信息,在处理完成后的弹窗中。

---

### Q3: 水印不显示?

**A**: 检查:
1. 水印图片路径是否正确
2. 文字水印是否输入了内容
3. 水印位置是否合适(尝试切换位置)
4. 图片尺寸是否太小(水印会自动缩放)

---

### Q4: 内存占用过高?

**A**: 建议:
1. 单次处理图片数量不超过50张
2. 处理完成后清空图片列表
3. 定期重启应用
4. 关闭不需要的其他应用

---

### Q5: 如何提高处理速度?

**A**: 优化建议:
1. 降低输出质量(80%已足够)
2. 使用WebP格式(体积更小)
3. 不需要的功能不要开启
4. SSD硬盘比HDD更快

---

### Q6: 处理后图片质量下降?

**A**: 调整质量:
1. 提高质量滑块到90-100%
2. 使用PNG格式(无损)
3. 不要多次重复处理
4. 检查原图质量

---

### Q7: 能处理多少张图片?

**A**: 
- ✅ **推荐**: 一次10-50张
- ⚠️ **最大**: 理论上无限制,但取决于内存
- 💡 **建议**: 超大批量可分多次处理

---

## 🛠️ 技术栈

### 核心技术

- **框架**: [Electron](https://www.electronjs.org/) v28.0.0
- **前端**: [React](https://react.dev/) v18.2.0
- **构建**: [Vite](https://vitejs.dev/) v5.0.8
- **样式**: [Tailwind CSS](https://tailwindcss.com/) v3.4.0

### 图片处理

- **引擎**: [Sharp](https://sharp.pixelplumbing.com/) v0.33.2
  - 高性能Node.js图片处理库
  - 基于libvips,支持多种格式
  
### 元数据管理

- **工具**: [exiftool-vendored](https://www.npmjs.com/package/exiftool-vendored) v27.0.0
  - EXIF信息读写
  - 支持版权、作者等字段

### AI集成

- **API**: [Google Generative AI](https://ai.google.dev/) v0.1.3
  - Gemini 1.5 Flash模型
  - 自动生成文件名和Alt文本

### 图标库

- **组件**: [Lucide React](https://lucide.dev/) v0.294.0
  - 现代化图标库
  - 轻量且美观

---

## 📂 项目结构

```
Image Marketing/
├── electron/              # Electron主进程
│   ├── main.js           # 主进程入口
│   ├── preload.js        # 预加载脚本
│   ├── image-processor.js # 图片处理逻辑
│   ├── metadata-manager.js # 元数据管理
│   └── ai-service.js     # AI服务
├── src/                  # React前端
│   ├── App.jsx          # 主应用组件
│   ├── App.css          # 样式
│   └── main.jsx         # 前端入口
├── dist/                # 构建输出
├── FEATURES.md          # 功能清单
├── ERRORS.md            # 错误记录
├── README.md            # 本文件
└── package.json         # 项目配置
```

---

## 🤝 贡献指南

欢迎提交Issue和Pull Request!

1. Fork本项目
2. 创建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启Pull Request

---

## 📄 许可证

MIT License

---

## 📞 支持

- 📧 Email: support@example.com
- 💬 Issues: [GitHub Issues](https://github.com/your-repo/issues)
- 📖 文档: [功能清单](FEATURES.md) | [错误报告](ERRORS.md)

---

<div align="center">

**享受批量处理的便捷! 🎉**

Made with ❤️ by Development Team

</div>
